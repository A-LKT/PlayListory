:root {
  color-scheme: light dark;
  --bg-start: #020617; /* slate-950 */
  --bg-mid: #0f172a;   /* slate-900 */
  --bg-end: #020617;   /* slate-950 */
  --text: #ffffff;
  --text-muted: rgba(255,255,255,0.7);
  --text-subtle: rgba(255,255,255,0.6);
  --text-faint: rgba(255,255,255,0.5);
  --border: rgba(255,255,255,0.1);
  --border-strong: rgba(255,255,255,0.2);
  --surface: rgba(255,255,255,0.05);
  --brand-400: #68a8f7;
  --brand-500: #3f86ee;
  --shadow-card: 0 1px 2px rgba(0,0,0,0.06), 0 1px 3px rgba(0,0,0,0.1);
}

html, body, #root {
  height: 100%;
}

body {
  margin: 0;
  color: var(--text);
  background: linear-gradient(to bottom, var(--bg-start), var(--bg-mid), var(--bg-end));
  background-attachment: fixed;
  font-family: Lato, Roboto, ui-sans-serif, system-ui, -apple-system, Segoe UI, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

/* Links */
a, a:visited, a:hover, a:active {
  color: inherit;
  text-decoration: none;
}

/* Layout */

.app-header, .app-footer {
  border-bottom: 1px solid var(--border);
}

.app-footer {
  border-top: 1px solid var(--border);
  border-bottom: 0;
}

/* Indeterminate loading bar under header */
.loading-bar { position: relative; height: 3px; overflow: hidden; }
.loading-bar .bar {
  position: absolute;
  height: 100%;
  background: linear-gradient(90deg, transparent, var(--brand-500), transparent);
  width: 40%;
  left: -40%;
  animation: loading-slide 1.2s ease-in-out infinite;
}
@keyframes loading-slide {
  0% { left: -40%; }
  50% { left: 30%; }
  100% { left: 100%; }
}

.container {
  max-width: 80rem; /* 1280px */
  margin-inline: auto;
  padding: 1rem; /* 16px */
}

.header-row,
.footer-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-block: 1rem;
}

.header-title {
  font-size: 1.125rem;
  font-weight: 600;
  letter-spacing: -0.01em;
}

.header-note {
  font-size: 0.75rem;
  color: var(--text-subtle);
}

.main {
  padding-block: 1.5rem;
}

.grid-main {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1.5rem; /* 24px */
}

@media (min-width: 768px) {
  .grid-main {
    grid-template-columns: repeat(12, minmax(0, 1fr));
  }
  .sidebar { grid-column: span 3 / span 3; }
  .content { grid-column: span 9 / span 9; margin-top: -10px; }
}

/* Cards and surfaces */
.card {
  border: 1px solid var(--border);
  border-radius: 0.75rem;
  background: var(--surface);
}

.card.padded { padding: 0.5rem; }

/* Landing choices */
.choice-stack { display: grid; gap: 1rem; }
.or-divider { display: grid; align-items: center; justify-content: center; position: relative; height: 2.5rem; }
.or-divider::before,
.or-divider::after {
  content: '';
  height: 1px;
  background: var(--border);
  position: absolute;
  left: 0;
  right: 0;
}
.or-divider::before { top: 50%; transform: translateY(-50%); }
.or-divider span {
  position: relative;
  padding: 0.25rem 0.5rem;
  font-size: 0.75rem;
  color: var(--text-muted);
  background: linear-gradient(to bottom, var(--bg-start), var(--bg-mid), var(--bg-end));
  border: 1px solid var(--border);
  border-radius: 999px;
}

/* File drop */
.file-drop {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.75rem;
  border: 2px dashed var(--border-strong);
  border-radius: 0.75rem;
  padding: 2rem;
  cursor: pointer;
  transition: background-color 150ms ease, border-color 150ms ease;
}
.file-drop:hover {
  background: var(--surface);
}
.file-drop.is-drag {
  border-color: var(--brand-400);
  background: color-mix(in oklab, var(--brand-400) 10%, transparent);
}
.file-drop__icon { font-size: 1.5rem; }
.file-drop__help {
  font-size: 0.875rem;
  color: var(--text-muted);
  text-align: center;
}

/* Inputs */
.search-input {
  width: 100%;
  box-sizing: border-box;
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--text);
  border-radius: 0.5rem;
  padding: 0.5rem 0.75rem;
  outline: none;
  transition: border-color 150ms ease;
}
.search-input:focus {
  border-color: var(--brand-400);
}

/* Sidebar */
.sidebar-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 0.5rem;
}
.sidebar-title { font-size: 0.875rem; font-weight: 600; }
.file-name { max-width: 12rem; font-size: 0.75rem; color: var(--text-faint); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

.playlist-panel {
  max-height: 60vh;
  overflow: auto;
}

.playlist-list { list-style: none; margin: 0; padding: 0; }
.playlist-list .item + .item { margin-top: 0.25rem; }

.playlist-button {
  width: 100%;
  text-align: left;
  border: 1px solid transparent;
  border-radius: 0.375rem;
  padding: 0.5rem 0.75rem;
  background: transparent;
  color: inherit;
  transition: background-color 150ms ease, border-color 150ms ease;
}
.playlist-button:hover { background: var(--surface); }
.playlist-button.is-active { background: color-mix(in oklab, var(--brand-500) 20%, transparent); border-color: color-mix(in oklab, var(--brand-500) 40%, transparent); }
.playlist-name { font-size: 0.875rem; font-weight: 600; }
.playlist-icon { margin-right: 0.375rem; }
.playlist-name.is-not-owned { color: var(--text-faint); }
.playlist-meta { font-size: 0.75rem; color: var(--text-subtle); }

/* Stats */
.stats-grid { display: grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap: 0.5rem; margin-top: 1.5rem; }
.stat-badge {
  border-radius: 0.5rem;
  background: var(--surface);
  border: 1px solid var(--border);
  padding: 0.5rem 0.75rem;
  box-shadow: var(--shadow-card);
}
.stat-badge__label { font-size: 0.75rem; color: var(--text-muted); }
.stat-badge__value { font-size: 1.125rem; font-weight: 600; }

/* Top artists */
.section-stack { margin-top: 1.5rem; display: grid; gap: 1.5rem; }
.section-title { font-size: 0.875rem; font-weight: 600; }
.top-artists-list { display: grid; gap: 0.25rem; }
.top-artist { display: flex; align-items: center; gap: 0.75rem; }
.artist-name { width: 10rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; color: rgba(255,255,255,0.9); }
.bar-bg { flex: 1; height: 0.5rem; border-radius: 0.25rem; background: rgba(255,255,255,0.1); overflow: hidden; }
.bar-fill { height: 100%; background: var(--brand-500); }
.artist-count { width: 2.5rem; text-align: right; font-size: 0.875rem; color: var(--text-muted); }

/* Year histogram */
.year-hist { display: grid; gap: 0.5rem; }
.year-bars { display: flex; align-items: flex-end; gap: 0.5rem; }
.year-col { display: flex; flex-direction: column; align-items: center; }
.year-bar { height: 8rem; width: 1.5rem; background: rgba(255,255,255,0.1); border-radius: 0.25rem; overflow: hidden; display: flex; align-items: flex-end; }
.year-bar .fill { width: 100%; background: var(--brand-400); }
.year-label { margin-top: 0.25rem; font-size: 10px; color: var(--text-muted); }

/* Content area */
.content-header { display: flex; align-items: end; gap: 0.75rem; margin-bottom: 0.5rem; }
.content-title { font-size: 1rem; font-weight: 600; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.content-meta { font-size: 0.75rem; color: var(--text-subtle); }
.spacer { flex: 1; }
.btn {
  font-size: 0.75rem;
  padding: 0.375rem 0.75rem;
  border-radius: 0.375rem;
  border: 1px solid var(--border);
  background: transparent;
  color: inherit;
}
.btn:hover { background: var(--surface); }

.tracks-panel { max-height: 70vh; overflow: auto; }

.tracks-pane { display: grid; gap: 0.25rem; }
.tracks-headers,
.track-row {
  display: grid;
  font-size: 0.875rem;
  grid-template-columns: 5fr auto 3fr 1fr;
  gap: 0.75rem;
  padding: 0.5rem 0.75rem;
}
.tracks-headers { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-subtle); }
.track-row { border-radius: 0.375rem; }
.track-row:hover { background: var(--surface); }
.col-artist { color: var(--text-muted); }
.col-album { color: var(--text-subtle); }
.col-len { text-align: right; color: rgba(255,255,255,0.5); }

/* External link */
.external-link {
  margin-left: 0.375rem;
  color: inherit;
  text-decoration: none;
}
.external-link:hover {
  color: inherit;
}
.external-link .icon {
  font-size: 0.75rem;
}

/* YT Music button */
.col-yt { width: 2rem; display: flex; align-items: center; }
.ytm-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 1.75rem;
  height: 1.25rem;
  font-size: 0.625rem;
  letter-spacing: 0.02em;
  color: var(--text-faint);
  background: rgba(255,255,255,0.08);
  border: 1px solid var(--border);
  border-radius: 0.25rem;
  text-decoration: none;
}
.ytm-btn:hover {
  filter: grayscale(1);
  background: rgba(255,255,255,0.12);
}

/* Utilities */
.truncate { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.hidden { display: none; }
.mx-auto { margin-inline: auto; }

/* Details */
details { margin-top: 1.5rem; }
summary { cursor: pointer; font-size: 0.875rem; color: var(--text-muted); }
pre.json {
  margin-top: 0.5rem;
  font-size: 0.75rem;
  white-space: pre-wrap;
  word-break: break-all;
  background: rgba(0,0,0,0.5);
  padding: 0.75rem;
  border-radius: 0.5rem;
  border: 1px solid var(--border);
  max-height: 40vh;
  overflow: auto;
}
